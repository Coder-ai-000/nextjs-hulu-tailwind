Had to refactor everything for SSG due to dependency tracing 